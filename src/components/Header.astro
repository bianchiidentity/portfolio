---
// Header component
type Props = {
  currentPage?: string;
};

const { currentPage } = Astro.props;
---

<header
  class="bg-gradient-to-r from-amber-50/60 to-orange-200/100 w-full fixed top-0 left-0 z-50 mt-0 border-b-2 border-gray-300 shadow-lg h-[10vh] min-h-[70px]"
>
  <div
    class="flex items-center justify-between px-[5vw] w-full m-0 box-border bg-amber-50/95 h-full"
  >
    <div class="flex flex-row items-center gap-[0.7vw] z-10 relative ml-0">
      <a
        href="/"
        class="no-underline text-inherit transition-all duration-200 ease-in-out hover:no-underline hover:text-inherit"
      >
        <h1
          class="text-4xl md:text-5xl lg:text-6xl text-gray-800 m-0 leading-tight tracking-wide relative z-2 font-sans hover:text-orange-500 hover:drop-shadow-lg"
        >
          川﨑浩史
        </h1>
      </a>
      <span
        class="text-sm md:text-base text-gray-600 ml-[0.7vw] font-bold whitespace-nowrap inline-block align-bottom font-sans"
        >Webエンジニア</span
      >
    </div>

    <!-- デスクトップナビゲーション -->
    <nav
      class="hidden md:flex items-center mr-0 pr-0 relative right-0 max-w-[60vw] justify-end"
    >
      <ul
        class="flex items-center list-none m-0 p-0 gap-9 max-w-full overflow-x-auto box-border justify-end"
      >
        <li>
          <a
            href="/"
            class={`text-orange-500 no-underline text-xl font-black tracking-wide transition-colors duration-200 font-sans hover:text-orange-700 ${currentPage === "home" ? "text-orange-700" : ""}`}
            >Home</a
          >
        </li>
        <li>
          <a
            href="/profile"
            class={`text-orange-500 no-underline text-xl font-black tracking-wide transition-colors duration-200 font-sans hover:text-orange-700 ${currentPage === "profile" ? "text-orange-700" : ""}`}
            >プロフィール</a
          >
        </li>
        <li>
          <a
            href="/dashboard"
            class={`text-orange-500 no-underline text-xl font-black tracking-wide transition-colors duration-200 font-sans hover:text-orange-700 ${currentPage === "dashboard" ? "text-orange-700" : ""}`}
            >ダッシュボード</a
          >
        </li>
        <li>
          <a
            href="/blog"
            class={`text-orange-500 no-underline text-xl font-black tracking-wide transition-colors duration-200 font-sans hover:text-orange-700 ${currentPage === "blog" ? "text-orange-700" : ""}`}
            >blog</a
          >
        </li>
      </ul>
    </nav>

    <!-- モバイルハンバーガーボタン -->
    <button
      class="md:hidden flex flex-col bg-none border-none cursor-pointer p-0 w-9 h-9 justify-around relative z-10 hamburger"
      id="hamburger"
      aria-label="メニュー"
    >
      <span
        class="w-full h-1 bg-orange-500 transition-all duration-300 ease-in-out rounded-sm"
      ></span>
      <span
        class="w-full h-1 bg-orange-500 transition-all duration-300 ease-in-out rounded-sm"
      ></span>
      <span
        class="w-full h-1 bg-orange-500 transition-all duration-300 ease-in-out rounded-sm"
      ></span>
    </button>
  </div>

  <!-- モバイルナビゲーション -->
  <nav
    class="md:hidden fixed top-0 left-[-100%] w-full h-screen bg-amber-50/95 flex flex-col justify-start items-center transition-left duration-300 ease-in-out pt-20 box-border header-nav"
    id="mobile-nav"
  >
    <ul
      class="flex flex-col gap-0 items-stretch w-full max-w-md mt-10 nav-list"
    >
      <li class="border-b border-gray-300 w-full">
        <a
          href="/"
          class="text-lg py-4 text-orange-500 no-underline font-medium block w-full text-center transition-colors duration-200 hover:text-orange-700"
          >Home</a
        >
      </li>
      <li class="border-b border-gray-300 w-full">
        <a
          href="/profile"
          class="text-lg py-4 text-orange-500 no-underline font-medium block w-full text-center transition-colors duration-200 hover:text-orange-700"
          >プロフィール</a
        >
      </li>
      <li class="border-b border-gray-300 w-full">
        <a
          href="/dashboard"
          class="text-lg py-4 text-orange-500 no-underline font-medium block w-full text-center transition-colors duration-200 hover:text-orange-700"
          >ダッシュボード</a
        >
      </li>
      <li class="w-full">
        <a
          href="/blog"
          class="text-lg py-4 text-orange-500 no-underline font-medium block w-full text-center transition-colors duration-200 hover:text-orange-700"
          >blog</a
        >
      </li>
    </ul>
  </nav>
</header>

<script>
  type HamburgerElements = {
    hamburger: HTMLElement | null;
    mobileNav: HTMLElement | null;
  };

  const elements: HamburgerElements = {
    hamburger: document.getElementById("hamburger"),
    mobileNav: document.getElementById("mobile-nav"),
  };

  elements.hamburger?.addEventListener("click", (): void => {
    elements.hamburger?.classList.toggle("active");
    elements.mobileNav?.classList.toggle("active");
  });
</script>

<style>
  @layer components {
    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }

    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(8px, -8px);
    }

    .header-nav.active {
      left: 0;
    }

    @media (max-width: 480px) {
      .nav-list a {
        font-size: 16px;
      }
    }
  }
</style>
